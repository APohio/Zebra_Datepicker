(function(c){c.Zebra_DatePicker=function($,F){var ma={always_show_clear:!1,always_visible:!1,days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),days_abbr:!1,direction:0,disabled_dates:!1,enabled_dates:!1,first_day_of_week:1,format:"Y-m-d",inside:!0,lang_clear_date:"Clear",months:"January February March April May June July August September October November December".split(" "),months_abbr:!1,offset:[5,-5],pair:!1,readonly_element:!0,select_other_months:!1,show_icon:!0,show_other_months:!0, show_week_number:!1,start_date:!1,view:"days",weekend_days:[0,6],zero_pad:!1,onChange:null,onClear:null,onSelect:null},t,q,s,B,D,G,H,R,aa,V,ca,j,r,z,w,n,W,J,K,S,E,X,v,y,Y,L,T,fa,ga,ha,A,da,a=this;a.settings={};var l=c($),ja=function(d){d||(a.settings=c.extend({},ma,F));a.settings.readonly_element&&l.attr("readonly","readonly");var b={days:["d","j","D"],months:["F","m","M","n","t"],years:["o","Y","y"]},g=!1,f=!1,h=!1;for(type in b)c.each(b[type],function(c,b){-1<a.settings.format.indexOf(b)&&("days"== type?g=!0:"months"==type?f=!0:"years"==type&&(h=!0))});A=g&&f&&h?["years","months","days"]:!g&&f&&h?["years","months"]:!g&&!f&&h?["years"]:!g&&f&&!h?["months"]:["years","months","days"];-1==c.inArray(a.settings.view,A)&&(a.settings.view=A[A.length-1]);E=[];S=[];for(var k=0;2>k;k++)b=0==k?a.settings.disabled_dates:a.settings.enabled_dates,c.isArray(b)&&0<b.length&&c.each(b,function(){for(var a=this.split(" "),b=0;4>b;b++){a[b]||(a[b]="*");a[b]=-1<a[b].indexOf(",")?a[b].split(","):Array(a[b]);for(var d= 0;d<a[b].length;d++)if(-1<a[b][d].indexOf("-")){var f=a[b][d].match(/^([0-9]+)\-([0-9]+)/);if(null!=f){for(var e=p(f[1]);e<=p(f[2]);e++)-1==c.inArray(e,a[b])&&a[b].push(e+"");a[b].splice(d,1)}}for(d=0;d<a[b].length;d++)a[b][d]=isNaN(p(a[b][d]))?a[b][d]:p(a[b][d])}0==k?E.push(a):S.push(a)});var b=new Date,e=!a.settings.reference_date?l.data("zdp_reference_date")&&void 0!=l.data("zdp_reference_date")?l.data("zdp_reference_date"):b:a.settings.reference_date,m,u;y=v=void 0;j=e.getMonth();aa=b.getMonth(); r=e.getFullYear();V=b.getFullYear();z=e.getDate();ca=b.getDate();if(!0===a.settings.direction)v=e;else if(!1===a.settings.direction)y=e,T=y.getMonth(),L=y.getFullYear(),Y=y.getDate();else if(!c.isArray(a.settings.direction)&&U(a.settings.direction)&&0<p(a.settings.direction)||c.isArray(a.settings.direction)&&(!0===a.settings.direction[0]||U(a.settings.direction[0])&&0<a.settings.direction[0]||(m=Z(a.settings.direction[0])))&&(!1===a.settings.direction[1]||U(a.settings.direction[1])&&0<=a.settings.direction[1]|| (u=Z(a.settings.direction[1]))))v=m?m:new Date(r,j,z+(!c.isArray(a.settings.direction)?p(a.settings.direction):p(!0===a.settings.direction[0]?0:a.settings.direction[0]))),j=v.getMonth(),r=v.getFullYear(),z=v.getDate(),u&&+u>=+v?y=u:!u&&(!1!==a.settings.direction[1]&&c.isArray(a.settings.direction))&&(y=new Date(r,j,z+p(a.settings.direction[1]))),y&&(T=y.getMonth(),L=y.getFullYear(),Y=y.getDate());else if(!c.isArray(a.settings.direction)&&U(a.settings.direction)&&0>p(a.settings.direction)||c.isArray(a.settings.direction)&& (!1===a.settings.direction[0]||U(a.settings.direction[0])&&0>a.settings.direction[0])&&(U(a.settings.direction[1])&&0<=a.settings.direction[1]||(m=Z(a.settings.direction[1]))))y=new Date(r,j,z+(!c.isArray(a.settings.direction)?p(a.settings.direction):p(!1===a.settings.direction[0]?0:a.settings.direction[0]))),T=y.getMonth(),L=y.getFullYear(),Y=y.getDate(),m&&+m<+y?v=m:!m&&c.isArray(a.settings.direction)&&(v=new Date(L,T,Y-p(a.settings.direction[1]))),v&&(j=v.getMonth(),r=v.getFullYear(),z=v.getDate()); else if(c.isArray(a.settings.disabled_dates)&&0<a.settings.disabled_dates.length)for(var M in E)if("*"==E[M][0]&&"*"==E[M][1]&&"*"==E[M][2]&&"*"==E[M][3]){var N=[];c.each(S,function(){"*"!=this[2][0]&&N.push(parseInt(this[2][0]+("*"==this[1][0]?"12":x(this[1][0],2))+("*"==this[0][0]?"*"==this[1][0]?"31":(new Date(this[2][0],this[1][0],0)).getDate():x(this[0][0],2)),10))});N.sort();if(0<N.length){var O=(N[0]+"").match(/([0-9]{4})([0-9]{2})([0-9]{2})/);r=parseInt(O[1],10);j=parseInt(O[2],10)-1;z=parseInt(O[3], 10)}break}if(C(r,j,z)){for(;C(r);)v?(r++,j=0):(r--,j=11);for(;C(r,j);)v?(j++,z=1):(j--,z=(new Date(r,j+1,0)).getDate()),11<j?(r++,j=0,z=1):0>j&&(r--,j=11,z=(new Date(r,j+1,0)).getDate());for(;C(r,j,z);)v?z++:z--;b=new Date(r,j,z);r=b.getFullYear();j=b.getMonth();z=b.getDate()}(m=Z(l.val()||(a.settings.start_date?a.settings.start_date:"")))&&C(m.getFullYear(),m.getMonth(),m.getDate())&&l.val("");ia(m);if(!a.settings.always_visible&&(d||(a.settings.show_icon?(m='<button type="button" class="Zebra_DatePicker_Icon'+ ("disabled"==l.attr("disabled")?" Zebra_DatePicker_Icon_Disabled":"")+'">Pick a date</button>',s=c(m),a.icon=s,da=s.add(l)):da=l,da.bind("click",function(b){b.preventDefault();l.attr("disabled")||("none"!=q.css("display")?a.hide():a.show())}),void 0!=s&&s.insertAfter($)),void 0!=s)){s.attr("style","");a.settings.inside&&s.addClass("Zebra_DatePicker_Icon_Inside");m=l.outerHeight(!1);u=parseInt(l.css("marginTop"),10)||0;M=parseInt(l.css("marginRight"),10)||0;var b=s.outerWidth(!0),e=s.outerHeight(!0), na=parseInt(s.css("marginLeft"),10)||0;a.settings.inside?s.css("marginLeft",-(M+b)):s.css("marginLeft",-M+na);s.css("marginTop",u+(m-e)/2)}void 0!=s&&(l.is(":visible")?s.show():s.hide());d||(m='<div class="Zebra_DatePicker"><table class="dp_header"><tr><td class="dp_previous">&#171;</td><td class="dp_caption">&#032;</td><td class="dp_next">&#187;</td></tr></table><table class="dp_daypicker"></table><table class="dp_monthpicker"></table><table class="dp_yearpicker"></table><table class="dp_footer"><tr><td>'+ a.settings.lang_clear_date+"</td></tr></table></div>",q=c(m),a.datepicker=q,B=c("table.dp_header",q),D=c("table.dp_daypicker",q),G=c("table.dp_monthpicker",q),H=c("table.dp_yearpicker",q),R=c("table.dp_footer",q),a.settings.always_visible?l.attr("disabled")||(a.settings.always_visible.append(q),a.show()):c("body").append(q),q.delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)","mouseover",function(){c(this).addClass("dp_hover")}).delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)", "mouseout",function(){c(this).removeClass("dp_hover")}),d=c("td",B),"firefox"==P.name?d.css("MozUserSelect","none"):"explorer"==P.name?d.bind("selectstart",function(){return!1}):d.mousedown(function(){return!1}),c(".dp_previous",B).bind("click",function(){c(this).hasClass("dp_blocked")||("months"==t?n--:"years"==t?n-=12:0>--w&&(w=11,n--),Q())}),c(".dp_caption",B).bind("click",function(){t="days"==t?-1<c.inArray("months",A)?"months":-1<c.inArray("years",A)?"years":"days":"months"==t?-1<c.inArray("years", A)?"years":-1<c.inArray("days",A)?"days":"months":-1<c.inArray("days",A)?"days":-1<c.inArray("months",A)?"months":"years";Q()}),c(".dp_next",B).bind("click",function(){c(this).hasClass("dp_blocked")||("months"==t?n++:"years"==t?n+=12:12==++w&&(w=0,n++),Q())}),D.delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_week_number)","click",function(){a.settings.select_other_months&&null!=(O=c(this).attr("class").match(/date\_([0-9]{4})(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])/))?ba(O[1], O[2],O[3],"days",c(this)):ba(n,w,p(c(this).html()),"days",c(this))}),G.delegate("td:not(.dp_disabled)","click",function(){var b=c(this).attr("class").match(/dp\_month\_([0-9]+)/);w=p(b[1]);-1==c.inArray("days",A)?ba(n,w,1,"months",c(this)):(t="days",a.settings.always_visible&&l.val(""),Q())}),H.delegate("td:not(.dp_disabled)","click",function(){n=p(c(this).html());-1==c.inArray("months",A)?ba(n,1,1,"years",c(this)):(t="months",a.settings.always_visible&&l.val(""),Q())}),c("td",R).bind("click",function(b){b.preventDefault(); l.val("");a.settings.always_visible||(n=w=K=J=W=null,R.css("display","none"));a.hide();if(a.settings.onClear&&"function"==typeof a.settings.onClear)a.settings.onClear(l)}),a.settings.always_visible||c(document).bind({mousedown:a._mousedown,keyup:a._keyup}),Q())};a.hide=function(){a.settings.always_visible||(ka("hide"),q.css("display","none"))};a.show=function(){t=a.settings.view;var d=Z(l.val()||(a.settings.start_date?a.settings.start_date:""));d?(J=d.getMonth(),w=d.getMonth(),K=d.getFullYear(),n= d.getFullYear(),W=d.getDate(),C(K,J,W)&&(l.val(""),w=j,n=r)):(w=j,n=r);Q();if(a.settings.always_visible)q.css("display","block");else{var d=q.outerWidth(),b=q.outerHeight(),g=(void 0!=s?s.offset().left+s.outerWidth(!0):l.offset().left+l.outerWidth(!0))+a.settings.offset[0],f=(void 0!=s?s.offset().top:l.offset().top)-b+a.settings.offset[1],h=c(window).width(),k=c(window).height(),e=c(window).scrollTop(),m=c(window).scrollLeft();g+d>m+h&&(g=m+h-d);g<m&&(g=m);f+b>e+k&&(f=e+k-b);f<e&&(f=e);q.css({left:g, top:f});q.fadeIn("explorer"==P.name&&9>P.version?0:150,"linear");ka()}};a.update=function(d){a.original_direction&&(a.original_direction=a.direction);a.settings=c.extend(a.settings,d);ja(!0)};var Z=function(d){d+="";if(""!=c.trim(d)){var b;b=a.settings.format.replace(/\s/g,"").replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1");for(var g="dDjlNSwFmMnYy".split(""),f=[],h=[],k=0;k<g.length;k++)-1<(position=b.indexOf(g[k]))&&f.push({character:g[k],position:position});f.sort(function(a,b){return a.position-b.position}); c.each(f,function(a,b){switch(b.character){case "d":h.push("0[1-9]|[12][0-9]|3[01]");break;case "D":h.push("[a-z]{3}");break;case "j":h.push("[1-9]|[12][0-9]|3[01]");break;case "l":h.push("[a-z]+");break;case "N":h.push("[1-7]");break;case "S":h.push("st|nd|rd|th");break;case "w":h.push("[0-6]");break;case "F":h.push("[a-z]+");break;case "m":h.push("0[1-9]|1[012]+");break;case "M":h.push("[a-z]{3}");break;case "n":h.push("[1-9]|1[012]");break;case "Y":h.push("[0-9]{4}");break;case "y":h.push("[0-9]{2}")}}); if(h.length&&(f.reverse(),c.each(f,function(a,d){b=b.replace(d.character,"("+h[h.length-a-1]+")")}),h=RegExp("^"+b+"$","ig"),segments=h.exec(d.replace(/\s/g,"")))){d=new Date;var e=d.getDate(),m=d.getMonth()+1,n=d.getFullYear(),l="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),N="January February March April May June July August September October November December".split(" "),q,j=!0;f.reverse();c.each(f,function(b,d){if(!j)return!0;switch(d.character){case "m":case "n":m=p(segments[b+ 1]);break;case "d":case "j":e=p(segments[b+1]);break;case "D":case "l":case "F":case "M":q="D"==d.character||"l"==d.character?a.settings.days:a.settings.months;j=!1;c.each(q,function(a,c){if(j)return!0;if(segments[b+1].toLowerCase()==c.substring(0,"D"==d.character||"M"==d.character?3:c.length).toLowerCase()){switch(d.character){case "D":segments[b+1]=l[a].substring(0,3);break;case "l":segments[b+1]=l[a];break;case "F":segments[b+1]=N[a];m=a+1;break;case "M":segments[b+1]=N[a].substring(0,3),m=a+1}j= !0}});break;case "Y":n=p(segments[b+1]);break;case "y":n="19"+p(segments[b+1])}});if(j&&(f=new Date(n,(m||1)-1,e||1),f.getFullYear()==n&&f.getDate()==(e||1)&&f.getMonth()==(m||1)-1))return f}return!1}},la=function(){var d=(new Date(n,w+1,0)).getDate(),b=(new Date(n,w,1)).getDay(),g=(new Date(n,w,0)).getDate(),b=b-a.settings.first_day_of_week,b=0>b?7+b:b;ea(a.settings.months[w]+", "+n);var f="<tr>";a.settings.show_week_number&&(f+="<th>"+a.settings.show_week_number+"</th>");for(var h=0;7>h;h++)f+= "<th>"+(c.isArray(a.settings.days_abbr)&&void 0!=a.settings.days_abbr[(a.settings.first_day_of_week+h)%7]?a.settings.days_abbr[(a.settings.first_day_of_week+h)%7]:a.settings.days[(a.settings.first_day_of_week+h)%7].substr(0,2))+"</th>";f+="</tr><tr>";for(h=0;42>h;h++){0<h&&0==h%7&&(f+="</tr><tr>");if(0==h%7&&a.settings.show_week_number){var k=new Date(n,w,h-b+1),e=k.getFullYear(),m=k.getMonth()+1,k=k.getDate(),u=void 0,j=void 0,l=void 0,p=l=void 0,q=void 0,l=j=u=void 0;3>m?(u=e-1,j=(u/4|0)-(u/100| 0)+(u/400|0),l=((u-1)/4|0)-((u-1)/100|0)+((u-1)/400|0),l=j-l,p=0,q=k-1+31*(m-1)):(u=e,j=(u/4|0)-(u/100|0)+(u/400|0),l=((u-1)/4|0)-((u-1)/100|0)+((u-1)/400|0),l=j-l,p=l+1,q=k+((153*(m-3)+2)/5|0)+58+l);u=(u+j)%7;k=(q+u-p)%7;j=q+3-k;l=0>j?53-((u-l)/5|0):j>364+l?1:(j/7|0)+1;f+='<td class="dp_week_number">'+l+"</td>"}e=h-b+1;if(a.settings.select_other_months&&(h<b||e>d))var r=new Date(n,w,e),s=r.getFullYear(),t=r.getMonth(),v=r.getDate(),r=s+x(t,2)+x(v,2);h<b?f+='<td class="'+(a.settings.select_other_months&& !C(s,t,v)?"dp_not_in_month_selectable date_"+r:"dp_not_in_month")+'">'+(a.settings.select_other_months||a.settings.show_other_months?x(g-b+h+1,a.settings.zero_pad?2:0):"&#032;")+"</td>":e>d?f+='<td class="'+(a.settings.select_other_months&&!C(s,t,v)?"dp_not_in_month_selectable date_"+r:"dp_not_in_month")+'">'+(a.settings.select_other_months||a.settings.show_other_months?x(e-d,a.settings.zero_pad?2:0):"&#032;")+"</td>":(m=(a.settings.first_day_of_week+h)%7,k="",C(n,w,e)?(k=-1<c.inArray(m,a.settings.weekend_days)? "dp_weekend_disabled":k+" dp_disabled",w==aa&&(n==V&&ca==e)&&(k+=" dp_disabled_current")):(-1<c.inArray(m,a.settings.weekend_days)&&(k="dp_weekend"),w==J&&(n==K&&W==e)&&(k+=" dp_selected"),w==aa&&(n==V&&ca==e)&&(k+=" dp_current")),f+="<td"+(""!=k?' class="'+c.trim(k)+'"':"")+">"+(a.settings.zero_pad?x(e,2):e)+"</td>")}D.html(c(f+"</tr>"));a.settings.always_visible&&(fa=c("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)",D));D.css("display","")},ka=function(a){if("explorer"== P.name&&6==P.version){if(!X){var b=p(q.css("zIndex"))-1;X=jQuery("<iframe>",{src:'javascript:document.write("")',scrolling:"no",frameborder:0,allowtransparency:"true",css:{zIndex:b,position:"absolute",top:-1E3,left:-1E3,width:q.outerWidth(),height:q.outerHeight(),filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)",display:"none"}});c("body").append(X)}switch(a){case "hide":X.css("display","none");break;default:a=q.offset(),X.css({top:a.top,left:a.left,display:"block"})}}},C=function(d,b,g){if((void 0== d||isNaN(d))&&(void 0==b||isNaN(b))&&(void 0==g||isNaN(g)))return!1;if(c.isArray(a.settings.direction)||0!==p(a.settings.direction)){var f=p(I(d,"undefined"!=typeof b?x(b,2):"","undefined"!=typeof g?x(g,2):"")),h=(f+"").length;if(8==h&&("undefined"!=typeof v&&f<p(I(r,x(j,2),x(z,2)))||"undefined"!=typeof y&&f>p(I(L,x(T,2),x(Y,2))))||6==h&&("undefined"!=typeof v&&f<p(I(r,x(j,2)))||"undefined"!=typeof y&&f>p(I(L,x(T,2))))||4==h&&("undefined"!=typeof v&&f<r||"undefined"!=typeof y&&f>L))return!0}"undefined"!= typeof b&&(b+=1);var k=!1,e=!1;E&&c.each(E,function(){if(!k&&(-1<c.inArray(d,this[2])||-1<c.inArray("*",this[2])))if("undefined"!=typeof b&&-1<c.inArray(b,this[1])||-1<c.inArray("*",this[1]))if("undefined"!=typeof g&&-1<c.inArray(g,this[0])||-1<c.inArray("*",this[0])){if("*"==this[3])return k=!0;var a=(new Date(d,b-1,g)).getDay();if(-1<c.inArray(a,this[3]))return k=!0}});S&&c.each(S,function(){if(!e&&(-1<c.inArray(d,this[2])||-1<c.inArray("*",this[2])))if(e=!0,"undefined"!=typeof b)if(e=!0,-1<c.inArray(b, this[1])||-1<c.inArray("*",this[1])){if("undefined"!=typeof g){e=!0;if(-1<c.inArray(g,this[0])||-1<c.inArray("*",this[0])){if("*"==this[3])return e=!0;var a=(new Date(d,b-1,g)).getDay();if(-1<c.inArray(a,this[3]))return e=!0}e=!1}}else e=!1});return(!S||!e)&&E&&k?!0:!1},U=function(a){return(a+"").match(/^\-?[0-9]+$/)?!0:!1},ea=function(d){c(".dp_caption",B).html(d);if(c.isArray(a.settings.direction)||0!==p(a.settings.direction)||1==A.length&&"months"==A[0]){d=n;var b=w,g,f;"days"==t?(f=0>b-1?I(d- 1,"11"):I(d,x(b-1,2)),g=11<b+1?I(d+1,"00"):I(d,x(b+1,2))):"months"==t?(f=d-1,g=d+1):"years"==t&&(f=d-7,g=d+7);1==A.length&&"months"==A[0]||C(f)?(c(".dp_previous",B).addClass("dp_blocked"),c(".dp_previous",B).removeClass("dp_hover")):c(".dp_previous",B).removeClass("dp_blocked");1==A.length&&"months"==A[0]||C(g)?(c(".dp_next",B).addClass("dp_blocked"),c(".dp_next",B).removeClass("dp_hover")):c(".dp_next",B).removeClass("dp_blocked")}},Q=function(){if(""==D.text()||"days"==t){if(""==D.text()){a.settings.always_visible|| q.css("left",-1E3);q.css({display:"block"});la();var d=D.outerWidth(),b=D.outerHeight();B.css("width",d);G.css({width:d,height:b});H.css({width:d,height:b});R.css("width",d);q.css({display:"none"})}else la();G.css("display","none");H.css("display","none")}else if("months"==t){ea(n);d="<tr>";for(b=0;12>b;b++){0<b&&0==b%3&&(d+="</tr><tr>");var g="dp_month_"+b;C(n,b)?g+=" dp_disabled":!1!==J&&J==b?g+=" dp_selected":aa==b&&V==n&&(g+=" dp_current");d+='<td class="'+c.trim(g)+'">'+(c.isArray(a.settings.months_abbr)&& void 0!=a.settings.months_abbr[b]?a.settings.months_abbr[b]:a.settings.months[b].substr(0,3))+"</td>"}G.html(c(d+"</tr>"));a.settings.always_visible&&(ga=c("td:not(.dp_disabled)",G));G.css("display","");D.css("display","none");H.css("display","none")}else if("years"==t){ea(n-7+" - "+(n+4));d="<tr>";for(b=0;12>b;b++)0<b&&0==b%3&&(d+="</tr><tr>"),g="",C(n-7+b)?g+=" dp_disabled":K&&K==n-7+b?g+=" dp_selected":V==n-7+b&&(g+=" dp_current"),d+="<td"+(""!=c.trim(g)?' class="'+c.trim(g)+'"':"")+">"+(n-7+b)+ "</td>";H.html(c(d+"</tr>"));a.settings.always_visible&&(ha=c("td:not(.dp_disabled)",H));H.css("display","");D.css("display","none");G.css("display","none")}a.settings.onChange&&("function"==typeof a.settings.onChange&&void 0!=t)&&(d="days"==t?D.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"):"months"==t?G.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"):H.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"), d.each(function(){if("days"==t)c(this).data("date",n+"-"+x(w+1,2)+"-"+x(p(c(this).text()),2));else if("months"==t){var a=c(this).attr("class").match(/dp\_month\_([0-9]+)/);c(this).data("date",n+"-"+x(p(a[1])+1,2))}else c(this).data("date",p(c(this).text()))}),a.settings.onChange(t,d,l));a.settings.always_show_clear||a.settings.always_visible||""!=l.val()?R.css("display",""):R.css("display","none")},ba=function(d,b,g,f,h){var k=new Date(d,b,g,12,0,0);f="days"==f?fa:"months"==f?ga:ha;var e;e="";for(var m= k.getDate(),j=k.getDay(),q=a.settings.days[j],p=k.getMonth()+1,r=a.settings.months[p-1],s=k.getFullYear()+"",t=0;t<a.settings.format.length;t++){var v=a.settings.format.charAt(t);switch(v){case "y":s=s.substr(2);case "Y":e+=s;break;case "m":p=x(p,2);case "n":e+=p;break;case "M":r=c.isArray(a.settings.months_abbr)&&void 0!=a.settings.months_abbr[p-1]?a.settings.months_abbr[p-1]:a.settings.months[p-1].substr(0,3);case "F":e+=r;break;case "d":m=x(m,2);case "j":e+=m;break;case "D":q=c.isArray(a.settings.days_abbr)&& void 0!=a.settings.days_abbr[j]?a.settings.days_abbr[j]:a.settings.days[j].substr(0,3);case "l":e+=q;break;case "N":j++;case "w":e+=j;break;case "S":e=1==m%10&&"11"!=m?e+"st":2==m%10&&"12"!=m?e+"nd":3==m%10&&"13"!=m?e+"rd":e+"th";break;default:e+=v}}l.val(e);a.settings.always_visible&&(J=k.getMonth(),w=k.getMonth(),K=k.getFullYear(),n=k.getFullYear(),W=k.getDate(),f.removeClass("dp_selected"),h.addClass("dp_selected"));a.hide();ia(k);if(a.settings.onSelect&&"function"==typeof a.settings.onSelect)a.settings.onSelect(e, d+"-"+x(b+1,2)+"-"+x(g,2),k,l);l.focus()},I=function(){for(var a="",b=0;b<arguments.length;b++)a+=arguments[b]+"";return a},x=function(a,b){for(a+="";a.length<b;)a="0"+a;return a},p=function(a){return parseInt(a,10)},ia=function(d){a.settings.pair&&c.each(a.settings.pair,function(){var a=c(this);!a.data||!a.data("Zebra_DatePicker")?a.data("zdp_reference_date",d):(a=a.data("Zebra_DatePicker"),a.update({reference_date:d,direction:0==a.settings.direction?1:a.settings.direction}),a.settings.always_visible&& a.show())})};a._keyup=function(c){("block"==q.css("display")||27==c.which)&&a.hide();return!0};a._mousedown=function(d){if("block"==q.css("display")){if(a.settings.show_icon&&c(d.target).get(0)===s.get(0))return!0;0==c(d.target).parents().filter(".Zebra_DatePicker").length&&a.hide()}return!0};var P={init:function(){this.name=this.searchString(this.dataBrowser)||"";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||""},searchString:function(a){for(var b= 0;b<a.length;b++){var c=a[b].string,f=a[b].prop;this.versionSearchString=a[b].versionSearch||a[b].identity;if(c){if(-1!=c.indexOf(a[b].subString))return a[b].identity}else if(f)return a[b].identity}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Firefox",identity:"firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"explorer",versionSearch:"MSIE"}]}; P.init();ja()};c.fn.Zebra_DatePicker=function($){return this.each(function(){if(void 0!=c(this).data("Zebra_DatePicker")){var F=c(this).data("Zebra_DatePicker");void 0!=F.icon&&F.icon.remove();F.datepicker.remove();c(document).unbind("keyup",F._keyup);c(document).unbind("mousedown",F._mousedown)}F=new c.Zebra_DatePicker(this,$);c(this).data("Zebra_DatePicker",F)})}})(jQuery);